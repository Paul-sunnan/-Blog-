{% extends 'sunnanblog/article_list.html' %}

{% block title %}
    <title>{{ article.title }}-孙楠的blog</title>
{% endblock %}

{% block css %}
    <!-- 代码高亮css -->
    <link rel="stylesheet"  href="/static/sunnanblog/_css/manni.css">

{% endblock %}

{% block active %}
				<ul class="navbar-nav flex-column text-left">
					<li class="nav-item  ">
					    <a class="nav-link" href="{% url 'article_menu' %}"><i class="fas fa-home fa-fw mr-2"></i>Blog首页 <span class="sr-only"></span></a>
					</li>
					<li class="nav-item  ">
					    <a class="nav-link" href="{% url 'article_list' %}"><i class="fas fa-bookmark fa-fw mr-2"></i>文章/学习笔记</a>
					</li>
                    <li class="nav-item  ">
					    <a class="nav-link" href="{% url 'article_create' %}"><i class="fas fa-pencil fa-fw mr-2"></i>写笔记</a>
					</li>
					<li class="nav-item  ">
					    <a class="nav-link" href="{% url 'about' %}"><i class="fas fa-user fa-fw mr-2"></i>个人简历</a>
					</li>
				</ul>
{% endblock %}

{% block main %}
    <div class="main-wrapper">

	    <article class="about-section py-5">
		    <div class="container">
			    <header class="blog-post-header">
				    <h2 class="title mb-2">{{ article.title }}</h2>
				    <div class="meta mb-3">
                        <span class="date">{{ article.created }}</span>
                        <span class="time">已读  {{ article.total_views }} </span>
                        <span class="comment"><a href="#"> 评论  0</a></span>
                        <span class="comment"><a href="#"> 作者  {{ article.author }}</a></span>
                        {% if request.user == article.author %}
                        <span class="comment"><a href="#" onclick="confirm_delete();"> 删除该文章 </a></span>
                            <form style="display:none;" id="safe_delete" action="{% url 'article_delete' article.id %}" method="POST">
                                {% csrf_token %}
                                <button type="submit">发送</button>
                            </form>
                        <span class="comment"><a href="{% url 'article_update' article.id %}"> 修改文章 </a></span>
                        {% endif %}
                    </div>
			    </header>

			    <div class="blog-post-body">
				    <figure class="blog-banner">
				        <a href="https://made4dev.com">
				        	<img class="img-fluid" src="" alt="image">
				        </a>

				        <figcaption class="mt-2 text-center image-caption">
				        	<a href="" target="_blank"></a>
				        </figcaption>
				    </figure>

                    <p> {{ article.body|safe }} </p>

                </div>

		    </div>
	    </article><!--//about-section-->


	    <footer class="footer text-center py-2 theme-bg-dark">
	        <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can buy the commercial license via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">孙楠Blog <i class="fas fa-home" style="color: #fb866a;"></i>  <a href="" target="_blank"></a> </small>

	    </footer>

    </div><!--//main-wrapper-->

{% endblock %}


{% block js %}

    <!-- 弹窗插件 -->
    <script src="/static/layer/layer.js" ></script>
    <script>
        // 删除文章的函数
        function confirm_delete() {
            // 调用layer弹窗组件
            console.log('点击删除按钮检测到')
            layer.open({
                // 弹窗标题
                title: "确认删除",
                // 正文
                content: "确认删除这篇文章吗？",
                // 点击确定按钮后调用的回调函数
                yes: function(index, layero) {
                    $('form#safe_delete button').click();
                    layer.close(index);
                },
            })
        }
    </script>

{% endblock %}
